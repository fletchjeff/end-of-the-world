function add_icon(selector, icon_type) {

    switch (icon_type) {
        case "A":
            var points_1 = "27.707,20.124 30.828,26.447 37.807,27.461 32.757,32.383 33.949,39.333 27.707,36.052 21.465,39.333   22.657,32.383 17.607,27.461 24.586,26.447 ",
                points_2 = "58.787,42.507 58.563,47.971 62.938,51.252 57.673,52.728 55.904,57.902 52.873,53.35 47.406,53.268 50.798,48.978   49.188,43.752 54.314,45.654 ",
                points_3 = "19.362,49.619 25.065,53.153 31.21,50.458 29.61,56.975 34.073,61.986 27.381,62.48 23.993,68.271 21.457,62.059   14.901,60.629 20.025,56.297 ",
                points_4 = "46.13,62.164 48.109,66.176 52.537,66.818 49.334,69.939 50.09,74.35 46.13,72.268 42.17,74.35 42.927,69.939   39.724,66.818 44.15,66.176 ",
                points_5 = "59.03,19.312 58.728,26.711 64.651,31.155 57.521,33.152 55.127,40.161 51.021,33.996 43.617,33.884 48.211,28.075   46.03,20.998 52.974,23.573 ",
                points_6 = "66.021,56.457 70.069,64.66 79.121,65.975 72.572,72.357 74.118,81.373 66.021,77.117 57.925,81.373 59.473,72.357   52.922,65.975 61.974,64.66 ",
                points_7 = "80.121,29.729 79.896,35.192 84.271,38.474 79.006,39.948 77.238,45.123 74.207,40.571 68.739,40.488   72.131,36.199 70.521,30.974 75.648,32.875";

            selector.append("polygon").attr("points", points_1);
            selector.append("polygon").attr("points", points_3);
            selector.append("polygon").attr("points", points_5);
            selector.append("polygon").attr("points", points_6);
            return selector;
        case "B":
            selector.append("path").attr("d", "M97.466,42.01c-0.098-0.571-0.552-1.016-1.126-1.098l-24.28-3.51l9.376-22.67c0.223-0.536,0.072-1.153-0.369-1.528   c-0.441-0.375-1.074-0.422-1.568-0.118L58.643,26.004l-7.39-23.393c-0.175-0.553-0.687-0.93-1.266-0.934c-0.003,0-0.005,0-0.009,0   c-0.576,0-1.088,0.37-1.268,0.918l-7.674,23.302L20.34,12.727c-0.487-0.311-1.121-0.272-1.568,0.099   c-0.447,0.37-0.604,0.986-0.389,1.524l9.1,22.782l-24.32,3.215c-0.575,0.076-1.035,0.515-1.14,1.085s0.171,1.143,0.683,1.417   L24.32,54.451L7.756,72.547c-0.392,0.428-0.463,1.059-0.176,1.562s0.87,0.768,1.434,0.647l24.018-5.007l-1.059,24.511   c-0.024,0.579,0.326,1.108,0.871,1.31c0.545,0.203,1.155,0.029,1.514-0.426l15.18-19.272l14.944,19.454   c0.259,0.336,0.652,0.523,1.06,0.523c0.007,0,0.016,0,0.019,0c0.737,0,1.336-0.599,1.336-1.336c0-0.092-0.009-0.18-0.026-0.266   l-0.753-24.297l23.954,5.297c0.566,0.126,1.148-0.129,1.441-0.629c0.293-0.501,0.229-1.133-0.156-1.564L75.012,54.758l21.755-11.34   C97.28,43.15,97.562,42.582,97.466,42.01z M60.666,81.432L50.537,68.243c-0.252-0.327-0.64-0.52-1.052-0.522   c-0.003,0-0.005,0-0.009,0c-0.408,0-0.795,0.188-1.049,0.51l-10.29,13.064l0.717-16.615c0.018-0.412-0.155-0.809-0.47-1.075   s-0.735-0.374-1.138-0.29l-16.28,3.395l11.229-12.268c0.278-0.304,0.4-0.719,0.332-1.125c-0.07-0.406-0.322-0.758-0.686-0.953   l-14.652-7.866l16.486-2.179c0.408-0.055,0.77-0.293,0.979-0.649c0.207-0.355,0.24-0.788,0.088-1.171l-6.17-15.443l14.031,8.928   c0.348,0.223,0.777,0.27,1.166,0.131s0.69-0.448,0.819-0.84l5.201-15.796l5.01,15.859c0.124,0.393,0.423,0.707,0.81,0.85   c0.386,0.145,0.816,0.102,1.168-0.116l14.137-8.757L64.559,40.68c-0.158,0.381-0.131,0.812,0.072,1.171   c0.205,0.358,0.562,0.603,0.971,0.661l16.459,2.379l-14.747,7.688c-0.366,0.19-0.622,0.539-0.696,0.945   c-0.074,0.404,0.043,0.822,0.317,1.129l11.079,12.402l-16.238-3.59c-0.402-0.09-0.824,0.012-1.141,0.275   c-0.317,0.263-0.496,0.658-0.482,1.069L60.666,81.432z");
            return selector;
        case "C":
            selector.append("polygon").attr("points", "70.832,31.506 45.293,31.506 45.293,1.229 28.665,1.229 28.665,31.506 1.231,31.506 1.231,48.135 28.665,48.135   28.665,98.997 45.293,98.997 45.293,48.135 70.832,48.135");
            return selector;
        case "I":
            selector.append("path").attr("d", "M62.117,83.835c-20.894,0-37.837-16.926-37.837-37.808c0-20.887,16.943-37.831,37.837-37.831  c6.466,0,12.562,1.637,17.883,4.503C71.914,6.332,61.75,2.5,50.671,2.5C24.437,2.5,3.165,23.777,3.165,50.006  C3.165,76.24,24.437,97.5,50.671,97.5c22.421,0,41.179-15.57,46.163-36.475C91.021,74.45,77.661,83.835,62.117,83.835z");
            selector.append("polygon").attr("points", "57.514,65.743 60.335,48.643 46.762,38.67 64.032,36.877 67.884,19.019 75.387,35.735   92.885,34.588 80.501,47.104 86.245,62.431 71.022,54.619 ");
            return selector;
        case "J":
            selector.append("path").attr("d", "M28.611,25.219L28.611,25.219C28.612,25.219,28.612,25.219,28.611,25.219L28.611,25.219L28.611,25.219L28.611,25.219     L28.611,25.219L28.611,25.219L28.611,25.219h-0.002l0,0H28.611L28.611,25.219L28.611,25.219L28.611,25.219L28.611,25.219     L28.611,25.219L28.611,25.219C28.611,25.22,28.611,25.22,28.611,25.219C28.611,25.22,28.612,25.221,28.611,25.219z M28.61,25.221     L28.61,25.221L28.61,25.221V25.22l0,0l0,0l0,0l0,0V25.221L28.61,25.221L28.61,25.221z M28.611,25.221L28.611,25.221L28.611,25.221    L28.611,25.221c0-0.001,0-0.001,0-0.001l0,0V25.221z M28.611,25.221L28.611,25.221L28.611,25.221L28.611,25.221L28.611,25.221z      M28.611,25.219L28.611,25.219L28.611,25.219L28.611,25.219L28.611,25.219z");
            selector.append("path").attr("d", "M43.17,0l14.559,25.219l28.611,0.007L72.039,49.997L86.34,74.773l-28.607,0.004L43.17,100L28.607,74.777L0,74.773  l14.305-24.776L0,25.227l28.611-0.007L43.17,0z M24.51,49.997l9.227,15.999h18.836l9.257-15.999l-9.254-16.039h-18.81L24.51,49.997z      M62.777,66.021h8.311l-4.152-7.191L62.777,66.021z M15.246,65.992h8.309L19.4,58.8L15.246,65.992z M39.041,25h8.311l-4.156-7.193 L39.041,25z M66.934,41.155l4.153-7.193h-8.31L66.934,41.155z M19.4,41.183l4.154-7.192h-8.309L19.4,41.183z M43.195,82.175     l4.155-7.192h-8.31L43.195,82.175z");
            return selector;
        case "M":
            selector.append("path").attr("d", "M83.423,68.8V56.266H74.07V43.732h-9.352V31.199h-6.353v-8.617h1.075v-2.5h-1.075v-1.417H43.015v1.417  h-1.074v2.5h1.074v8.617h-6.352v12.533h-9.352v12.533h-9.352V68.8H8.607v12.533h84.168V68.8H83.423z M52.233,31.416h-3.084v-5h3.084  V31.416z");
            return selector;
        case "O":
            selector.append("path").attr("d", "M4.565,10.621C0.983,15.277-0.571,21.05,0.188,26.875c0.76,5.826,3.743,11.005,8.399,14.587   c7.777,5.982,18.971,4.521,24.955-3.254c4.853-6.311,3.668-15.392-2.641-20.245c-5.135-3.95-12.526-2.986-16.476,2.148   c-3.227,4.195-2.439,10.235,1.755,13.461c3.444,2.648,8.4,2.002,11.05-1.441c1.06-1.377,1.519-3.084,1.294-4.807   c-0.225-1.722-1.107-3.254-2.484-4.313c-1.144-0.88-2.562-1.262-3.993-1.075c-1.431,0.187-2.704,0.92-3.583,2.064   c-0.337,0.438-0.255,1.065,0.183,1.402c0.438,0.337,1.065,0.255,1.402-0.183c0.554-0.72,1.356-1.182,2.257-1.299   c0.901-0.118,1.794,0.123,2.514,0.677c0.954,0.734,1.565,1.795,1.721,2.988c0.155,1.191-0.163,2.373-0.896,3.328   c-1.977,2.568-5.676,3.051-8.245,1.074c-3.321-2.555-3.944-7.334-1.39-10.656c3.277-4.261,9.41-5.061,13.671-1.783   c5.435,4.181,6.456,12.003,2.275,17.439c-5.311,6.902-15.248,8.199-22.15,2.891c-8.738-6.723-10.379-19.3-3.657-28.038   C14.636,0.809,30.516-1.262,41.548,7.224c6.733,5.178,11.046,12.669,12.145,21.091c1.1,8.424-1.147,16.773-6.326,23.506   c-0.338,0.438-0.256,1.066,0.182,1.402c0.438,0.338,1.066,0.256,1.402-0.182c5.506-7.158,7.895-16.031,6.727-24.984   c-1.169-8.953-5.753-16.914-12.908-22.418C30.861-3.52,13.723-1.285,4.565,10.621z");
            return selector;
        case "P":
            selector.append("rect").attr("x", 23).attr("y", 43.4).attr("transform", "matrix(-0.3139 -0.9494 0.9494 -0.3139 38.2629 120.0249)").attr("width", "79.1").attr("height", 5.6);
            selector.append("rect").attr("x", 34.6).attr("y", 6.6).attr("transform", "matrix(-0.9495 -0.3138 0.3138 -0.9495 58.944 101.865)").attr("width", 5.6).attr("height", 79.1);

            selector.append("rect").attr("x", 10.2).attr("y", 34.4).attr("width", 79.7).attr("height", 5.6);
            selector.append("rect").attr("x", 54.7).attr("y", 20.7).attr("transform", "matrix(-0.5843 -0.8115 0.8115 -0.5843 42.0987 142.5215)").attr("width", 5.6).attr("height", 79.6);
            selector.append("rect").attr("x", 2.7).attr("y", 57.7).attr("transform", "matrix(-0.8123 -0.5833 0.5833 -0.8123 41.8032 134.4126)").attr("width", 79.7).attr("height", 5.6);
            selector.append("path").attr("d", "M50,5c24.8,0,45,20.2,45,45c0,24.8-20.2,45-45,45S5,74.8,5,50C5,25.2,25.2,5,50,5z M50,89.4c21.7,0,39.4-17.7,39.4-39.4   c0-21.7-17.7-39.4-39.4-39.4S10.6,28.3,10.6,50C10.6,71.7,28.3,89.4,50,89.4z");
            return selector;
        case "S":
            selector.append("path").attr("d", "M31.562,29.23L22,12V4h1.984c1.105,0,2-0.895,2-2s-0.895-2-2-2H18v12h-4V0H7.984c-1.105,0-2,0.895-2,2s0.895,2,2,2H10v8  L0.332,29.387C-0.321,30.5-0.016,32,1.484,32h29C31.984,32,32.336,30.719,31.562,29.23z M9.984,26c-1.105,0-2-0.895-2-2s0.895-2,2-2  s2,0.895,2,2S11.089,26,9.984,26z M17.984,22c-1.106,0-2-0.895-2-2s0.895-2,2-2c1.105,0,2,0.895,2,2S19.09,22,17.984,22z").attr("transform", "scale(2.8)");
            return selector;
        case "X":
            selector.append("path").attr("d", "M50.501,3.5c-25.915,0-47,21.085-47,47s21.085,47,47,47c16.572,0,32.1-8.914,40.522-23.266l1.401-2.388l-2.731-0.447  c-4.017-0.658-7.977,0.235-12.112,2.746c-4.369,2.658-9.218,2.654-13.587-0.001c-6.451-3.922-13.367-3.926-19.825,0  c-2.026,1.233-4.521,1.885-7.214,1.886c-2.689,0-5.344-0.685-7.283-1.88c-4.061-2.499-6.684-6.009-6.684-8.94  c0-3.053,2.465-3.29,3.221-3.29c0.577,0,1.141,0.128,1.508,0.343c2.627,1.537,5.945,2.383,9.345,2.383  c3.362,0,6.503-0.83,9.081-2.399c5.322-3.236,10.193-3.239,15.521,0c2.75,1.672,5.814,2.556,8.863,2.556  c3.087,0,6.066-0.859,8.854-2.556c2.108-1.281,5.008-2.046,7.756-2.046c2.5,0,4.698,0.62,6.187,1.747l2.351,1.779l0.647-2.877  c0.783-3.473,1.18-6.955,1.18-10.35C97.501,24.585,76.416,3.5,50.501,3.5z M93.11,57.497c-1.743-0.722-3.765-1.095-5.974-1.095  c-3.465,0-7.011,0.946-9.729,2.599c-4.376,2.661-9.405,2.653-13.771,0c-6.459-3.928-13.012-3.926-19.468,0  c-1.984,1.208-4.441,1.846-7.107,1.846c-2.695,0-5.403-0.679-7.427-1.862c-0.951-0.557-2.167-0.862-3.426-0.862  c-3.381,0-7.02,2.218-7.02,7.088c0,4.286,3.254,8.951,8.49,12.175c2.56,1.576,5.853,2.444,9.275,2.444  c3.39-0.001,6.566-0.845,9.188-2.439c5.253-3.194,10.635-3.188,15.879,0c5.579,3.391,11.961,3.393,17.533,0.001  c2.239-1.359,4.358-2.132,6.444-2.341C77.97,86.63,64.648,93.702,50.501,93.702C26.68,93.702,7.299,74.321,7.299,50.5  S26.68,7.298,50.501,7.298S93.703,26.679,93.703,50.5C93.703,52.797,93.505,55.141,93.11,57.497z");
            selector.append("path").attr("d", "M33.885,27.949c-7.199,0-13.056,5.856-13.056,13.056s5.856,13.056,13.056,13.056S46.94,48.204,46.94,41.005  S41.084,27.949,33.885,27.949z M33.885,51.687c-5.89,0-10.682-4.792-10.682-10.682s4.792-10.682,10.682-10.682  s10.682,4.792,10.682,10.682S39.774,51.687,33.885,51.687z");
            selector.append("path").attr("d", "M33.885,32.697c-4.581,0-8.308,3.727-8.308,8.308c0,4.582,3.727,8.309,8.308,8.309c4.582,0,8.309-3.727,8.309-8.309  C42.193,36.424,38.467,32.697,33.885,32.697z M33.885,46.939c-3.272,0-5.935-2.662-5.935-5.935s2.662-5.935,5.935-5.935  s5.935,2.662,5.935,5.935S37.157,46.939,33.885,46.939z");
            selector.append("path").attr("d", "M33.885,37.444c-1.963,0-3.561,1.598-3.561,3.561s1.598,3.561,3.561,3.561s3.561-1.598,3.561-3.561  S35.848,37.444,33.885,37.444z M33.885,42.192c-0.654,0-1.187-0.532-1.187-1.188c0-0.654,0.532-1.187,1.187-1.187  s1.187,0.532,1.187,1.187C35.071,41.66,34.539,42.192,33.885,42.192z");
            selector.append("path").attr("d", "M67.117,20.828c-8.508,0-15.43,6.922-15.43,15.43c0,8.507,6.922,15.429,15.43,15.429s15.43-6.922,15.43-15.429  C82.547,27.75,75.625,20.828,67.117,20.828z M67.117,49.313c-7.199,0-13.056-5.856-13.056-13.056s5.856-13.056,13.056-13.056  s13.056,5.856,13.056,13.056S74.316,49.313,67.117,49.313z");
            selector.append("path").attr("d", "M67.117,25.576c-5.89,0-10.682,4.792-10.682,10.682s4.792,10.682,10.682,10.682s10.682-4.792,10.682-10.682  S73.007,25.576,67.117,25.576z M67.117,44.565c-4.582,0-8.309-3.727-8.309-8.308c0-4.582,3.727-8.309,8.309-8.309  c4.581,0,8.308,3.727,8.308,8.309C75.425,40.839,71.698,44.565,67.117,44.565z");
            selector.append("path").attr("d", "M67.117,30.323c-3.272,0-5.935,2.662-5.935,5.935s2.662,5.935,5.935,5.935s5.935-2.662,5.935-5.935  S70.39,30.323,67.117,30.323z M67.117,39.818c-1.963,0-3.561-1.598-3.561-3.561s1.598-3.561,3.561-3.561s3.561,1.598,3.561,3.561  S69.08,39.818,67.117,39.818z");
            return selector;
        case "Y":
            var mask = selector.append("g");
            mask.append("circle").attr("cx", "51.1").attr("cy", "80.003").attr("r", "3.023");
            mask.append("path").attr("d", "M90.616,39.004c-2.5-2.952-5.852-3.684-7.499-3.864c0.853-3.621,6.119-6.394,6.175-6.424   c0.243-0.126,0.407-0.365,0.437-0.637c0.028-0.272-0.081-0.541-0.292-0.715c-2.483-2.052-5.245-3.093-8.207-3.093   c-5.018,0-9.288,2.958-11.248,4.574c-1.098-8.163,3.089-11.047,3.273-11.17c0.293-0.189,0.434-0.543,0.35-0.881   s-0.372-0.586-0.719-0.616c-0.464-0.042-0.927-0.062-1.376-0.062c-8.13,0-11.774,6.721-13.104,10.146   c-5.187-9.833-10.814-11.361-13.805-11.361c-1.751,0-2.866,0.507-2.912,0.529c-0.282,0.13-0.465,0.41-0.473,0.72   c-0.007,0.311,0.163,0.599,0.438,0.743c6.614,3.45,6.636,9.094,6.234,11.698c-8.827-8.832-15.94-10.188-19.467-10.188   c-1.422,0-2.226,0.219-2.312,0.244c-0.33,0.095-0.566,0.387-0.589,0.73c-0.022,0.343,0.173,0.663,0.488,0.801   c5.494,2.395,6.119,7.406,6.076,9.836c-3.261-2.213-6.679-3.334-10.18-3.334c-8.62,0-14.68,6.697-14.935,6.982   c-0.214,0.241-0.267,0.585-0.134,0.879C6.969,34.833,7.26,35.02,7.58,35.02c0.002,0,0.004,0,0.006,0l0.628-0.002   c8.871,0,11.43,1.504,12.147,2.229C6.259,44.976,8.917,54.878,9.039,55.303c0.09,0.314,0.358,0.544,0.683,0.584   c0.322,0.041,0.642-0.117,0.806-0.399c2.423-4.169,5.608-5.279,7.743-5.506c-2.137,1.78-3.42,3.853-3.824,6.186   c-0.829,4.771,2.351,8.814,2.485,8.984c0.19,0.238,0.495,0.352,0.799,0.29c0.3-0.061,0.54-0.283,0.622-0.578   c0.765-2.701,3.23-4.536,4.688-5.416c0.331,7.703,2.046,16.388,7.164,22.698c4.643,5.725,11.44,8.628,20.204,8.628l0.54-0.004   l0.562,0.004c8.767,0,15.566-2.904,20.209-8.63c5.601-6.906,7.128-16.655,7.223-24.848c2.856,0.08,3.919,6.949,4.066,9.367   c0.02,0.328,0.232,0.611,0.542,0.72c0.089,0.032,0.18,0.046,0.271,0.046c0.226,0,0.446-0.093,0.604-0.267   c3.59-3.951,5.165-7.814,4.682-11.483c-0.364-2.758-1.817-4.803-3.039-6.077c1.838,0.891,4.305,3.253,5.699,4.862   c0.207,0.238,0.534,0.336,0.837,0.25c0.304-0.085,0.532-0.339,0.584-0.65C94.301,47.402,93.436,42.334,90.616,39.004z    M89.371,40.059c2.178,2.571,3.006,6.431,2.502,11.468c-1.465-7.46-4.019-11.851-7.608-13.053c-4.345-1.454-8.51,2.295-8.903,2.661   h-0.089c0.837-2.659,4.225-5.249,6.332-6.648c-0.128,0.444-0.207,0.904-0.229,1.376c-0.011,0.222,0.086,0.438,0.24,0.6   c0.154,0.161,0.382,0.251,0.605,0.251C82.663,36.713,86.618,36.808,89.371,40.059z M51.51,89.144l-0.562-0.004l-0.54,0.004   c-7.098,0-12.802-2.005-17.006-5.955c0.4-1.036,1.375-3.161,3.272-5.297c2.423-2.729,6.896-6.032,14.412-6.273   c12.147,0.389,16.53,8.697,17.635,11.388C64.497,87.082,58.721,89.144,51.51,89.144z M23.124,51.697   c-0.028,0.446-0.052,0.902-0.073,1.368c-3.366,0.188-5.818,2.881-7.099,4.704c0-0.434,0.022-0.873,0.1-1.322   c0.05-0.283,0.119-0.56,0.2-0.835C17.58,54.233,20.738,51.293,23.124,51.697z M18.081,40.578c1.887,0.094,5.016,0.5,6.192,1.662   c-0.071,0.364-0.173,0.921-0.29,1.644c-3.273-1.983-6.556-1.638-8.75-0.986C16.043,42.124,16.987,41.346,18.081,40.578z    M14.003,30.396c3.177,0.407,14.377,2.424,16.108,10.738h-0.895c-5.293-8.814-14.688-8.801-18.978-8.26   C11.205,32.096,12.481,31.195,14.003,30.396z M19.003,28.599c1.058,0.253,2.788,0.797,4.688,1.922   c2.704,1.6,6.285,4.73,8.38,10.614h-1.133c-1.553-8.083-11.295-10.63-15.64-11.367C16.433,29.271,17.676,28.858,19.003,28.599z    M36.03,21.913c1.718,2.944,7.939,14.235,5.401,19.221h-1.906c1.593-6.542-4.434-16.769-6.812-20.458   C33.722,20.959,34.83,21.36,36.03,21.913z M41.991,25.565c1.48,2.107,3.531,6.779,2.205,15.569h-1.874   c2.079-5.045-2.735-14.587-4.973-18.567C38.79,23.329,40.34,24.305,41.991,25.565z M45.968,28.999   c0.592,2.172,1.836,7.94-0.176,12.135h-0.771c1.031-6.954,0.015-11.414-1.237-14.112C44.498,27.631,45.224,28.284,45.968,28.999z    M13.973,44.216c1.781-0.818,5.819-2.087,9.873,0.559c-0.061,0.402-0.121,0.847-0.183,1.315c-3.329-3.435-8.067-0.74-10.991,0.927   c-0.334,0.19-0.653,0.368-0.955,0.532C12.246,46.486,12.976,45.362,13.973,44.216z M11.207,48.703   c0.505-0.209,1.112-0.547,1.869-0.978c3.021-1.721,7.533-4.273,10.449-0.529c-0.046,0.4-0.093,0.816-0.137,1.25   c-0.56-0.606-1.242-1.042-2.057-1.288c-3.47-1.051-8.293,1.509-10.566,2.911C10.879,49.633,11.023,49.177,11.207,48.703z    M16.053,59.109c0.908-1.488,3.407-4.981,6.966-5.23c-0.012,0.334-0.021,0.675-0.027,1.018c-3.302,1.09-5.554,3.904-6.631,5.546   C16.232,60.02,16.126,59.576,16.053,59.109z M24.682,54.5l17.303-11.734h8.368L24.826,61.188   C24.659,58.867,24.628,56.607,24.682,54.5z M44.627,16.533c1.577,0.005,3.991,0.526,6.701,2.903   c1.303,2.483,3.68,9.306-0.206,21.699h-1.775c2.989-7.615,3.317-13.906,0.962-18.695C48.741,19.253,46.345,17.469,44.627,16.533z    M59.765,42.765l17.48,11.855c0.048,1.964,0.019,4.061-0.122,6.212L52.088,42.765H59.765z M69.421,20.054   c-0.481,1.037-0.89,2.312-1.101,3.861c-7.004,5.396-8.441,15.359-8.651,17.219h-0.888C57.041,33.416,64.865,24.48,69.421,20.054z    M81.229,25.902c1.199,0,2.363,0.207,3.486,0.602c-1.524,0.547-3.939,1.524-6.473,2.988c-5.48,3.169-9.044,7.191-10.328,11.642   H66.34c1.92-9.2,11.298-13.862,14.534-15.213C80.992,25.917,81.109,25.902,81.229,25.902z M82.133,33.175   c-1.94,1.185-6.769,4.439-7.706,7.959h-2.442c2.026-4.789,7.852-8.456,12.139-10.603C83.354,31.304,82.641,32.192,82.133,33.175z    M60.492,41.134c0.24-1.907,1.676-10.908,7.715-16.075c-0.074,1.143-0.037,2.418,0.143,3.829   c-1.588,1.415-6.098,5.984-6.336,12.246H60.492z M86.604,28.466c-4.16,1.766-12.996,6.181-15.501,12.668H68.77   c2.729-8.869,14.113-13.175,17.084-14.159c0.543,0.263,1.076,0.57,1.597,0.93C87.197,28.064,86.911,28.252,86.604,28.466z    M69.998,31.014c0.042-0.042,3.496-3.455,8.089-4.678c-4.285,2.242-11.017,6.935-12.576,14.798h-2.682   c0.224-5.398,3.919-9.58,5.666-11.259c0.041,0.239,0.076,0.475,0.125,0.722c0.058,0.295,0.275,0.535,0.563,0.623   C69.473,31.307,69.786,31.228,69.998,31.014z M61.865,23.083c2.241-3.281,5.196-5.055,8.785-5.298   c-1.578,1.411-4.316,4.017-6.852,7.213c-4.785,6.034-6.796,11.586-5.862,16.137h-1.766c-2.061-5.79,1.768-10.97,2.551-11.943   c0.312-0.062,0.563-0.294,0.635-0.608C59.363,28.556,60.015,25.792,61.865,23.083z M57.826,28.75   c0.024,0.053,0.061,0.096,0.095,0.141c-1.109,1.455-4.488,6.532-2.618,12.243h-3.328c3.14-10.165,2.175-16.626,0.948-20.109   C54.528,22.824,56.197,25.312,57.826,28.75z M48.527,31.032c0.279-0.062,0.507-0.267,0.597-0.538   c0.025-0.075,1.81-5.662-1.551-10.616c0.733,0.799,1.431,1.759,2.003,2.922c2.282,4.637,1.907,10.806-1.104,18.335H46.68   c1.613-3.717,1.017-8.313,0.415-11.012c0.222,0.227,0.44,0.438,0.665,0.675C47.957,31.004,48.25,31.093,48.527,31.032z    M29.061,20.051c0.709,0.035,1.544,0.135,2.484,0.334c1.808,2.737,8.95,14.134,7.145,20.75h-1.383   c0.652-4.131-2.485-8.021-3.748-9.392c0.007-0.026,0.019-0.051,0.024-0.078C33.597,31.581,34.794,24.245,29.061,20.051z    M32.281,32.169c0.195,0.152,0.448,0.197,0.685,0.141c1.185,1.308,4.17,5.041,3.512,8.824h-1.711   c-0.078-4.657-2.677-8.302-4.925-10.596C30.664,31.009,31.478,31.55,32.281,32.169z M27.286,29.323   c2.135,1.695,6.559,5.909,6.665,11.811h-1.019c-2.169-6.306-5.986-9.644-8.862-11.336c-1.123-0.661-2.178-1.125-3.086-1.455   c0.304-0.019,0.61-0.033,0.921-0.033C23.722,28.311,25.519,28.653,27.286,29.323z M12.315,33.514   c4.475-0.194,11.573,0.748,15.953,7.621h-1.472c-1.232-1.666-3.447-2.993-4.54-3.581c-0.007-0.245-0.095-0.792-0.679-1.411   C20.233,34.718,17.06,33.826,12.315,33.514z M21.819,38.315c0.021-0.011,0.037-0.027,0.056-0.039   c0.928,0.501,2.707,1.563,3.874,2.858h-0.586c-0.1,0-0.194,0.019-0.283,0.051c-0.031,0.011-0.056,0.034-0.085,0.049   c-0.055,0.027-0.109,0.053-0.153,0.092c-0.031,0.024-0.052,0.057-0.077,0.085c-0.003,0.004-0.007,0.008-0.01,0.011   c-1.323-1.031-3.683-1.432-5.371-1.585C19.988,39.323,20.864,38.814,21.819,38.315z M21.122,49.944   c0.281-0.173,0.429-0.499,0.376-0.825c-0.054-0.326-0.298-0.587-0.619-0.663c-0.211-0.049-6.004-1.342-10.486,4.328   c0.006-0.469,0.046-1.006,0.138-1.595c1.723-1.122,7.058-4.312,10.565-3.25c0.934,0.283,1.653,0.841,2.182,1.69   c-0.035,0.407-0.068,0.825-0.099,1.253c-2.014-0.288-4.309,1.24-5.96,2.673C18.086,52.228,19.383,51.018,21.122,49.944z    M17.395,62.877c-0.226-0.402-0.467-0.896-0.688-1.446c0.804-1.323,2.986-4.452,6.268-5.669c-0.015,0.662-0.017,1.286,0.003,1.846   C21.793,58.226,18.884,59.971,17.395,62.877z M31.473,81.123c-4.264-5.256-6.022-12.42-6.591-19.176l25.224,8.914   c-11.679,0.796-16.103,8.808-17.328,11.713C32.326,82.111,31.888,81.633,31.473,81.123z M70.453,81.118   c-0.354,0.436-0.726,0.848-1.107,1.248c-0.51-1.188-1.489-3.068-3.186-4.986c-2.424-2.741-6.813-6.026-14.102-6.519l25.003-9.139   C76.514,68.539,74.764,75.802,70.453,81.118z M78.942,55.663c-0.014-1.314-0.063-2.571-0.135-3.764   c-0.001-0.04-0.003-0.075-0.005-0.114c2.062,1.332,3.277,3.406,3.61,6.212C81.591,56.649,80.472,55.685,78.942,55.663z    M83.327,59.925c0.063-4.336-1.469-7.404-4.563-9.136c-0.067-1.548-0.152-2.843-0.248-3.934c2.082,1.68,7.426,6.901,7.141,16.008   c-0.36,0.583-0.756,1.168-1.219,1.761C84.258,63.303,83.924,61.54,83.327,59.925z M87.489,55.894   c0.232,1.76-0.116,3.599-1.021,5.499c-0.326-9.57-6.672-14.648-8.063-15.647c-0.048-0.43-0.098-0.82-0.149-1.173   c1.658,0.32,4.952,1.209,5.521,3.265c-0.158,0.072-0.312,0.155-0.453,0.263c-0.209,0.162-0.329,0.416-0.317,0.68   c0.011,0.266,0.149,0.509,0.373,0.653C83.416,49.456,86.946,51.77,87.489,55.894z M84.816,47.615c-0.087,0-0.169,0.011-0.252,0.019   c-0.716-2.657-4.771-3.631-6.45-3.92c-0.073-0.386-0.148-0.71-0.226-0.989c0.836-0.513,2.551-1.323,4.424-0.784   c2.174,0.628,3.946,2.879,5.284,6.657C86.635,48.011,85.668,47.615,84.816,47.615z M88.689,49.338l0.027-0.009l-0.128-0.387   c-1.451-4.425-3.486-7.044-6.05-7.785c-2.069-0.599-3.922,0.188-4.924,0.775c-0.019-0.039-0.035-0.074-0.053-0.109   c-0.003-0.011-0.008-0.034-0.009-0.042c-0.079-0.377-0.413-0.647-0.798-0.647h-0.107c1.367-1.031,4.384-2.884,7.36-1.886   c3.233,1.086,5.578,5.145,6.985,12.058C90.315,50.657,89.522,49.956,88.689,49.338z");
            return mask;
    }
}

var margin = 50,
    width = 2400,
    mid_point = 800,
    height = 700,
    info_padding = 85,
    box_padding = 145;

var colors = ['rgb(102,194,165)', 'rgb(252,141,98)', 'rgb(141,160,203)', 'rgb(231,138,195)'];

var svg = d3.select("body")
    .append("svg")
    .attr("width", width + 700)
    .attr("height", height)
    .attr("class", "main_svg");



svg.append("g").append("path").attr("transform", "translate(350,-120) scale(9)").attr("stroke", "#eee").attr("fill", "#eee").attr("opacity", "0.5").attr("d", "M23.043,72.299c-1.245,0-2.258,1.012-2.258,2.256s1.013,2.256,2.258,2.256c1.243,0,2.256-1.012,2.256-2.256  S24.286,72.299,23.043,72.299z M23.043,75.311c-0.418,0-0.758-0.338-0.758-0.756c0-0.416,0.34-0.756,0.758-0.756  c0.416,0,0.756,0.34,0.756,0.756C23.799,74.973,23.459,75.311,23.043,75.311z M68.424,65.523c-1.244,0-2.256,1.012-2.256,2.256  s1.012,2.256,2.256,2.256s2.256-1.012,2.256-2.256S69.668,65.523,68.424,65.523z M68.424,68.535c-0.417,0-0.756-0.338-0.756-0.756  c0-0.416,0.339-0.756,0.756-0.756s0.756,0.34,0.756,0.756C69.18,68.197,68.841,68.535,68.424,68.535z M46.559,27.795  c1.412,0,2.561-1.148,2.561-2.561s-1.148-2.561-2.561-2.561c-1.413,0-2.563,1.148-2.563,2.561S45.146,27.795,46.559,27.795z   M46.559,24.174c0.584,0,1.061,0.477,1.061,1.061c0,0.586-0.477,1.061-1.061,1.061c-0.586,0-1.063-0.475-1.063-1.061  C45.496,24.65,45.973,24.174,46.559,24.174z M50.949,31.961c0.818,0,1.484-0.666,1.484-1.484s-0.666-1.484-1.484-1.484  s-1.484,0.666-1.484,1.484S50.131,31.961,50.949,31.961z M26.287,33.59c0.818,0,1.484-0.666,1.484-1.484s-0.666-1.484-1.484-1.484  s-1.484,0.666-1.484,1.484S25.469,33.59,26.287,33.59z M69.275,51.574c-0.818,0-1.484,0.666-1.484,1.484s0.666,1.484,1.484,1.484  s1.484-0.666,1.484-1.484S70.094,51.574,69.275,51.574z M20.709,37.756c0-0.818-0.666-1.484-1.484-1.484s-1.484,0.666-1.484,1.484  s0.666,1.484,1.484,1.484S20.709,38.574,20.709,37.756z M73.969,58.002c-0.818,0-1.484,0.666-1.484,1.484s0.666,1.484,1.484,1.484  s1.484-0.666,1.484-1.484S74.787,58.002,73.969,58.002z M61.223,73.805c-0.818,0-1.484,0.666-1.484,1.484s0.666,1.484,1.484,1.484  s1.484-0.666,1.484-1.484S62.041,73.805,61.223,73.805z M28.242,76.199c-0.818,0-1.484,0.666-1.484,1.484s0.666,1.484,1.484,1.484  s1.484-0.666,1.484-1.484S29.061,76.199,28.242,76.199z M76.563,34.898L66.204,45.258c-2.225,2.225-5.844,2.224-8.068-0.001  c-1.079-1.077-1.673-2.511-1.673-4.034c0-1.524,0.593-2.957,1.671-4.035l8.967-8.967c0.293-0.293,0.293-0.768,0-1.061  s-0.768-0.293-1.061,0l-8.967,8.967c-0.217,0.217-0.412,0.449-0.598,0.688c-3.859-2.952-8.668-4.725-13.892-4.725  c-12.648,0-22.938,10.29-22.938,22.938c0,12.648,10.29,22.938,22.938,22.938c12.647,0,22.938-10.289,22.938-22.938  c0-2.432-0.411-4.762-1.119-6.962c1.047-0.339,2.032-0.917,2.862-1.747l10.359-10.359c0.293-0.293,0.293-0.768,0-1.061  S76.856,34.605,76.563,34.898z M38.332,34.018c0.211,0.215,0.439,0.438,0.683,0.67c0.354,0.338,0.808,0.77,1.074,1.088  c-0.569,0.225-1.896,0.445-3.198,0.445c-1.392,0-2.44,1.051-3.365,1.979c-0.414,0.413-0.803,0.805-1.193,1.084  c-0.266,0.191-0.478,0.328-0.645,0.437c-0.965,0.627-1.021,0.952-0.828,2.146c0.032,0.203-0.016,0.414-0.129,0.564  c-0.063,0.086-0.127,0.12-0.137,0.123c-0.023-0.007-0.108-0.068-0.207-0.254c-0.422-0.789-1.047-1.03-1.495-1.094  c-1.01-0.143-2.032,0.486-2.595,1.067c-0.68,0.698-0.889,1.741-0.486,2.428c0.307,0.522,0.9,0.741,1.544,0.568  c0.243-0.065,0.46-0.033,0.608,0.091c0.133,0.109,0.199,0.279,0.186,0.478c-0.053,0.786,0.221,1.503,0.733,1.918  c0.447,0.364,1.036,0.468,1.655,0.292c0.414-0.117,0.768-0.251,1.094-0.375c0.6-0.229,0.996-0.381,1.484-0.301  c0.717,0.118,1.246-0.143,1.633-0.332c0.419-0.206,0.504-0.23,0.746-0.101c0.248,0.133,0.488,0.386,0.742,0.652  c0.528,0.556,1.248,1.325,2.472,1.259c0.624-0.032,1.228,0.801,1.765,1.533c0.239,0.326,0.466,0.635,0.705,0.887  c0.545,0.576,1.163,0.652,1.709,0.721c0.531,0.064,1.034,0.127,1.665,0.654c0.404,0.338,0.467,0.555-0.421,1.646  c-0.223,0.273-0.433,0.533-0.561,0.797c-0.305,0.623-0.212,1.301-0.13,1.898c0.136,0.988,0.11,1.223-0.479,1.439  c-0.223,0.082-0.447,0.15-0.666,0.217c-1.01,0.311-2.266,0.695-2.506,2.256c-0.07,0.453-0.339,0.705-0.65,0.998  c-0.291,0.273-0.621,0.584-0.695,1.066l-0.032,0.246c-0.058,0.492-0.08,0.588-0.448,0.697c-0.648,0.193-1.193,0.736-1.496,1.49  c-0.37,0.924-0.301,1.984,0.186,2.832c0.158,0.279,0.22,0.699,0.129,0.898c-0.016,0.037-0.029,0.068-0.131,0.088  c-0.056,0.012-0.168,0.033-0.352-0.115c-0.545-0.443-0.968-1.748-0.968-2.576c0-0.885-0.591-1.537-1.065-2.061  c-0.324-0.357-0.659-0.727-0.659-1.008c0-0.396,0.087-0.664,0.206-1.033c0.168-0.52,0.378-1.164,0.378-2.301  c0-1.25-1.048-1.996-1.89-2.596c-0.566-0.402-1.152-0.82-1.182-1.201c-0.078-1.012-0.693-1.59-1.188-2.057  c-0.503-0.475-0.788-0.771-0.798-1.348c-0.013-0.762,0.317-1.158,0.667-1.58c0.304-0.365,0.682-0.818,0.568-1.446  c-0.171-0.938-1.039-1.108-1.559-1.21c-0.365-0.072-0.609-0.129-0.682-0.258c-0.732-1.305-1.699-1.424-2.473-1.389  c-0.777,0.037-0.962-0.068-1.031-0.604c-0.084-0.646-0.388-1.353-0.706-1.915C26.932,39.189,32.148,35.266,38.332,34.018z   M42.584,76.465c-2.443,0-4.781-0.43-6.971-1.186c0.354-1.293,0.752-1.424,1.343-1.6c0.208-0.063,0.415-0.127,0.618-0.217  c0.518-0.232,0.731-0.68,0.873-0.975c0.145-0.303,0.182-0.35,0.313-0.387c0.209-0.057,0.359-0.027,0.446,0.092  c0.099,0.137,0.122,0.387-0.046,0.639l-0.213,0.311c-0.275,0.396-0.559,0.805-0.313,1.289c0.255,0.502,0.736,0.512,1.632,0.531  c1.719,0.031,3.622-0.012,4.526-1.045c0.213-0.244,0.769-0.785,1.297-0.549c1.816,0.811,2.733,0.775,3.474,0.744  c0.308-0.014,0.55-0.021,0.827,0.041c0.256,0.061,0.471,0.16,0.527,0.625C48.354,75.865,45.538,76.465,42.584,76.465z   M52.301,74.111c-0.305-0.963-1.064-1.301-1.574-1.418c-0.472-0.109-0.854-0.092-1.223-0.078c-0.639,0.025-1.306,0.053-2.803-0.615  c-1.002-0.449-2.139-0.1-3.037,0.93c-0.465,0.531-2.115,0.555-3.139,0.537c0.372-0.703,0.338-1.543-0.105-2.154  c-0.459-0.633-1.25-0.885-2.063-0.656c-0.805,0.225-1.092,0.826-1.263,1.186c-0.044,0.09-0.109,0.227-0.132,0.252  c-0.143,0.063-0.288,0.105-0.435,0.148c-0.918,0.273-1.781,0.693-2.32,2.516c-7.67-3.268-13.062-10.881-13.062-19.73  c0-3.133,0.691-6.101,1.904-8.785c0.043,0.139,0.073,0.27,0.089,0.383c0.172,1.345,1.043,1.993,2.594,1.91  c0.443-0.02,0.734-0.004,1.088,0.625c0.417,0.742,1.189,0.895,1.701,0.995c0.079,0.016,0.179,0.035,0.266,0.056  c-0.045,0.057-0.096,0.118-0.14,0.17c-0.413,0.496-1.036,1.246-1.014,2.564c0.021,1.236,0.742,1.918,1.269,2.414  c0.439,0.414,0.689,0.668,0.721,1.08c0.084,1.08,1,1.732,1.809,2.309c0.76,0.541,1.259,0.93,1.259,1.373  c0,0.898-0.155,1.377-0.305,1.838c-0.138,0.424-0.279,0.863-0.279,1.496c0,0.861,0.557,1.475,1.048,2.016  c0.348,0.385,0.677,0.746,0.677,1.053c0,1.039,0.472,2.885,1.521,3.738c0.373,0.307,0.791,0.461,1.225,0.461  c0.125,0,0.251-0.012,0.378-0.039c0.548-0.113,0.972-0.445,1.194-0.939c0.335-0.74,0.144-1.67-0.195-2.262  c-0.26-0.453-0.295-1.025-0.094-1.527c0.125-0.313,0.334-0.553,0.533-0.611c1.324-0.396,1.443-1.414,1.508-1.959l0.005-0.127  c0.03-0.051,0.164-0.178,0.262-0.27c0.38-0.357,0.955-0.898,1.104-1.859c0.09-0.584,0.432-0.734,1.463-1.051  c0.244-0.076,0.495-0.152,0.746-0.246c1.775-0.654,1.569-2.154,1.445-3.051c-0.055-0.404-0.112-0.822-0.008-1.037  c0.053-0.109,0.225-0.32,0.377-0.508c0.568-0.699,1.899-2.338,0.219-3.742c-0.97-0.811-1.82-0.916-2.442-0.994  c-0.477-0.059-0.645-0.092-0.806-0.262c-0.188-0.197-0.378-0.463-0.583-0.742c-0.685-0.934-1.634-2.23-3.046-2.145  c-0.496,0.035-0.816-0.271-1.314-0.795c-0.309-0.324-0.658-0.692-1.118-0.939c-0.938-0.504-1.647-0.154-2.118,0.076  c-0.318,0.156-0.494,0.238-0.729,0.197c-0.887-0.146-1.555,0.109-2.262,0.379c-0.287,0.11-0.6,0.23-0.965,0.334  c-0.213,0.057-0.283,0.004-0.305-0.014c-0.105-0.086-0.203-0.338-0.182-0.652c0.047-0.684-0.219-1.316-0.727-1.736  c-0.48-0.395-1.113-0.546-1.799-0.418c0.027-0.131,0.1-0.309,0.254-0.466c0.387-0.399,0.969-0.676,1.31-0.626  c0.106,0.015,0.247,0.064,0.38,0.314c0.549,1.027,1.396,1.172,2.008,0.966c0.875-0.295,1.434-1.325,1.258-2.422  c-0.025-0.155-0.051-0.313-0.063-0.417c0.062-0.044,0.141-0.092,0.238-0.154c0.183-0.119,0.412-0.269,0.701-0.477  c0.492-0.352,0.944-0.805,1.382-1.244c0.789-0.791,1.534-1.537,2.304-1.537c0.4,0,3.938-0.035,4.69-1.254  c0.206-0.334,0.223-0.73,0.044-1.089c-0.244-0.488-0.816-1.05-1.438-1.646c0.788-0.088,1.586-0.143,2.397-0.143  c1.923,0,3.784,0.262,5.557,0.74c-0.602,0.734-0.539,1.44-0.479,1.701c0.195,0.858,1.01,1.443,2.024,1.455  c1.222,0.014,1.589,0.265,1.612,0.396l0.092,0.527c0.158,0.936,0.282,1.674,0.981,2.883c0.153,0.266-0.217,0.959-0.487,1.466  c-0.208,0.39-0.424,0.794-0.539,1.19c-0.281,0.951-0.938,3.182,0.913,4.43c0.509,0.343,0.61,0.586,0.779,0.99  c0.151,0.361,0.339,0.812,0.814,1.324c1.281,1.381,3.033,1.043,4.081,0.838l0.286-0.055c0.054-0.01,0.174-0.031,0.359,0.129  c0.442,0.385,0.893,1.504,0.834,3.051c-0.041,1.035-0.473,1.953-0.89,2.84c-0.417,0.885-0.812,1.723-0.748,2.594l0.024,0.297  c0.075,0.854,0.232,2.633-0.473,3.502c-0.668,0.824-0.683,1.879-0.036,2.561c0.31,0.328,0.798,0.574,1.42,0.574  c0.576,0,1.268-0.213,2.035-0.768c0.04-0.029,0.083-0.066,0.124-0.098C58.806,69.537,55.842,72.301,52.301,74.111z M63.108,61.191  c-1.28,1.91-2.4,3.242-3.241,3.85c-0.797,0.576-1.334,0.537-1.486,0.379c-0.115-0.123-0.069-0.363,0.112-0.586  c1.086-1.342,0.894-3.529,0.801-4.58l-0.022-0.271c-0.035-0.48,0.264-1.113,0.609-1.848c0.459-0.975,0.979-2.08,1.03-3.42  c0.07-1.834-0.446-3.459-1.349-4.242c-0.477-0.412-1.032-0.575-1.609-0.473l-0.305,0.059c-1.123,0.217-2.037,0.327-2.695-0.384  c-0.294-0.317-0.404-0.58-0.531-0.884c-0.208-0.498-0.443-1.063-1.325-1.656c-0.78-0.525-0.689-1.484-0.313-2.764  c0.073-0.249,0.243-0.568,0.424-0.906c0.46-0.861,1.032-1.935,0.463-2.922c-0.563-0.975-0.653-1.504-0.801-2.383l-0.095-0.547  c-0.292-1.596-2.385-1.619-3.071-1.627c-0.339-0.004-0.548-0.148-0.58-0.289c-0.037-0.161,0.147-0.495,0.695-0.834  c2.132,0.77,4.099,1.875,5.858,3.24c-0.463,0.961-0.716,2.02-0.715,3.119c0,1.925,0.75,3.734,2.112,5.096  c1.404,1.404,3.25,2.106,5.095,2.106c0.251,0,0.502-0.016,0.752-0.042c0.694,2.095,1.1,4.318,1.1,6.645  C64.021,57.172,63.696,59.238,63.108,61.191z M57.793,41.223c0,2.412,1.963,4.377,4.377,4.377c1.17,0,2.27-0.455,3.096-1.282  c0.827-0.827,1.282-1.927,1.281-3.093c0.001-1.17-0.453-2.27-1.279-3.097s-1.925-1.282-3.102-1.282  C59.755,36.846,57.793,38.81,57.793,41.223z M64.206,39.188c0.543,0.543,0.842,1.266,0.841,2.036  c0.001,0.767-0.298,1.488-0.842,2.032c-0.543,0.544-1.267,0.843-2.035,0.843c-1.587,0-2.877-1.291-2.877-2.877  s1.289-2.877,2.881-2.877C62.941,38.346,63.664,38.646,64.206,39.188z M72.89,34.008l-4.721,4.721c-0.293,0.293-0.293,0.768,0,1.061  c0.146,0.146,0.338,0.219,0.53,0.219s0.384-0.072,0.53-0.219l4.721-4.721c0.293-0.293,0.293-0.768,0-1.061  S73.183,33.715,72.89,34.008z M74.794,28.563c-0.293-0.293-0.768-0.293-1.061,0l-6.607,6.607c-0.293,0.293-0.293,0.768,0,1.061  c0.146,0.146,0.338,0.221,0.53,0.221s0.384-0.074,0.53-0.221l6.607-6.607C75.087,29.33,75.087,28.855,74.794,28.563z M63.872,34.957  c0.146,0.146,0.338,0.219,0.53,0.219s0.384-0.072,0.53-0.219l11.273-11.273c0.293-0.293,0.293-0.768,0-1.061s-0.768-0.293-1.061,0  L63.872,33.896C63.579,34.189,63.579,34.664,63.872,34.957z M75.817,27.576c0.146,0.146,0.338,0.219,0.53,0.219  s0.384-0.072,0.53-0.219l2.635-2.637c0.293-0.293,0.293-0.768,0-1.061s-0.768-0.293-1.061,0l-2.635,2.637  C75.524,26.809,75.524,27.283,75.817,27.576z M72.469,22.545c0.192,0,0.385-0.074,0.531-0.221l0.211-0.213  c0.293-0.293,0.291-0.768-0.002-1.061c-0.294-0.292-0.769-0.291-1.061,0.002l-0.211,0.213c-0.293,0.293-0.291,0.768,0.002,1.061  C72.086,22.472,72.277,22.545,72.469,22.545z M80.097,26.799l-1.277,1.279c-0.292,0.293-0.29,0.768,0.004,1.061  c0.146,0.145,0.337,0.217,0.528,0.217c0.192,0,0.386-0.073,0.532-0.221l1.277-1.279c0.292-0.295,0.29-0.77-0.004-1.061  S80.389,26.504,80.097,26.799z M79.237,32.225l-0.721,0.721c-0.293,0.293-0.293,0.768,0,1.061c0.146,0.146,0.338,0.221,0.53,0.221  s0.384-0.074,0.53-0.221l0.721-0.721c0.293-0.293,0.293-0.768,0-1.061S79.53,31.932,79.237,32.225z M76.934,29.961l-2.277,2.279  c-0.292,0.293-0.292,0.768,0.002,1.061c0.146,0.146,0.338,0.219,0.529,0.219c0.192,0,0.385-0.072,0.531-0.22l2.277-2.28  c0.292-0.293,0.292-0.768-0.002-1.061S77.226,29.668,76.934,29.961z M82.04,21.354c-0.293-0.293-0.768-0.293-1.061,0l-0.389,0.389  c-0.293,0.293-0.293,0.768,0,1.061c0.146,0.146,0.338,0.219,0.53,0.219s0.384-0.072,0.53-0.219l0.389-0.389  C82.333,22.121,82.333,21.646,82.04,21.354z M68.303,26.709c0.192,0,0.384-0.072,0.53-0.219l1.945-1.945  c0.293-0.293,0.293-0.768,0-1.061s-0.768-0.293-1.061,0l-1.945,1.945c-0.293,0.293-0.293,0.768,0,1.061  C67.919,26.637,68.11,26.709,68.303,26.709z");

svg.append("g").attr("transform", "translate(2050,-20) scale(7)").attr("stroke", "#eee").attr("fill", "#eee").attr("opacity", "0.5").html('<circle cx="35.148" cy="24.359" r="2.219"/><circle cx="35.148" cy="74.709" r="2.219"/><circle cx="26.119" cy="64.762" r="1.913"/><circle cx="74.02" cy="18.391" r="1.913"/><circle cx="65.908" cy="80.83" r="1.913"/><circle cx="38.209" cy="84.35" r="1.913"/><circle cx="19.538" cy="35.991" r="1.913"/><circle cx="22.445" cy="54.049" r="1.913"/><circle cx="78.917" cy="47.315" r="1.913"/><circle cx="54.89" cy="78.381" r="1.913"/><circle cx="51.676" cy="21.758" r="1.913"/><circle cx="17.089" cy="51.753" r="2.219"/><circle cx="75.703" cy="64.455" r="2.219"/><circle cx="29.103" cy="23.211" r="1.683"/><circle cx="78.075" cy="42.8" r="1.377"/><circle cx="80.217" cy="74.326" r="1.377"/><circle cx="34.612" cy="80.142" r="1.377"/><circle cx="21.298" cy="63.308" r="1.377"/><circle cx="49.457" cy="16.325" r="1.377"/><circle cx="71.801" cy="23.211" r="1.684"/><circle cx="21.91" cy="49.228" r="1.683"/><circle cx="42.417" cy="78.917" r="3.52"/><circle cx="65.22" cy="24.283" r="3.52"/><circle cx="24.359" cy="68.664" r="1.224"/><circle cx="62.006" cy="82.284" r="1.225"/><circle cx="84.809" cy="63.919" r="1.224"/><circle cx="85.268" cy="31.628" r="1.224"/><circle cx="65.373" cy="18.467" r="1.224"/><circle cx="52.824" cy="17.549" r="1.224"/><circle cx="28.338" cy="30.557" r="1.224"/><circle cx="33.846" cy="83.814" r="1.224"/><circle cx="6.311" cy="32.547" r="0.918"/><circle cx="94.144" cy="56.88" r="0.653"/><circle cx="19.921" cy="6.296" r="0.653"/><circle cx="19.156" cy="91.313" r="0.653"/><circle cx="56.037" cy="81.825" r="0.652"/><circle cx="82.36" cy="53.166" r="0.653"/><circle cx="56.803" cy="12.305" r="0.653"/><circle cx="15.33" cy="56.38" r="0.653"/><circle cx="30.94" cy="74.744" r="0.653"/><circle cx="68.587" cy="91.926" r="0.652"/><circle cx="52.211" cy="14.03" r="0.918"/><circle cx="89.553" cy="69.888" r="0.918"/><circle cx="24.818" cy="71.878" r="0.918"/><circle cx="21.145" cy="31.628" r="0.918"/><circle cx="56.037" cy="17.702" r="0.918"/><circle cx="78.075" cy="52.136" r="0.918"/><circle cx="25.889" cy="77.233" r="0.918"/><circle cx="72.336" cy="30.021" r="2.984"/><circle cx="33.77" cy="14.871" r="1.607"/><circle cx="15.712" cy="34.459" r="1.071"/><circle cx="66.368" cy="87.411" r="1.071"/><circle cx="31.399" cy="27.803" r="1.607"/><circle cx="80.677" cy="63.919" r="1.607"/><circle cx="11.657" cy="55.196" r="1.607"/><circle cx="84.503" cy="38.056" r="1.147"/><circle cx="74.555" cy="34.842" r="1.148"/><circle cx="83.125" cy="67.286" r="1.147"/><circle cx="46.09" cy="89.323" r="1.148"/><circle cx="18.696" cy="56.114" r="1.147"/><circle cx="28.644" cy="18.62" r="1.148"/><circle cx="41.652" cy="12.346" r="1.147"/><circle cx="76.544" cy="38.668" r="1.607"/><circle cx="46.702" cy="21.987" r="1.607"/><circle cx="16.401" cy="74.785" r="1.071"/><circle cx="25.047" cy="34.613" r="2.525"/><circle cx="32.776" cy="19.539" r="1.836"/><circle cx="52.211" cy="82.743" r="1.836"/><circle cx="15.329" cy="44.178" r="1.837"/><circle cx="80.064" cy="35.761" r="1.837"/><circle cx="61.011" cy="77.311" r="2.525"/><circle cx="57.797" cy="22.216" r="2.526"/><circle cx="29.333" cy="70.117" r="2.984"/><circle cx="79.376" cy="57.874" r="2.984"/><circle cx="68.586" cy="74.633" r="3.52"/><circle cx="21.451" cy="42.342" r="3.52"/><circle cx="62.924" cy="13.417" r="1.53"/><circle cx="49.151" cy="78.764" r="1.53"/><circle cx="14.105" cy="21.069" r="1.531"/><circle cx="38.132" cy="92.537" r="1.53"/><circle cx="79.682" cy="40.045" r="0.842"/><circle cx="75.55" cy="25.507" r="0.842"/><circle cx="79.299" cy="68.052" r="1.684"/><circle cx="83.048" cy="70.348" r="0.842"/><circle cx="88.94" cy="49.84" r="0.842"/><circle cx="83.431" cy="60.4" r="0.842"/><circle cx="27.19" cy="26.731" r="0.842"/><circle cx="46.779" cy="7.989" r="0.842"/><circle cx="31.705" cy="77.692" r="0.841"/><circle cx="43.381" cy="85.977" r="2.219"/><circle cx="47.647" cy="82.57" r="1.378"/><circle cx="47.921" cy="86.361" r="0.842"/><circle cx="68.739" cy="88.252" r="0.842"/><circle cx="18.237" cy="47.238" r="0.841"/><circle cx="79.452" cy="12.958" r="1.683"/><circle cx="69.199" cy="18.927" r="1.607"/><circle cx="75.779" cy="10.969" r="0.842"/><circle cx="50.528" cy="50.008" r="22.726"/>');


//adding visual elements to the page.
//time axis change
svg.append("line")
    .attr("x1", 800.5)
    .attr("x2", 800.5)
    .attr("y1", 580.5)
    .attr("y2", height - margin - 3)
    .attr("class", "visual_line");

svg.append("circle")
    .attr("cx", 800.5)
    .attr("cy", 580.5)
    .attr("r", 3)
    .attr("class", "visual_circle");

svg.append('foreignObject')
    .attr('x', 710)
    .attr('y', 560)
    .attr('width', 500)
    .attr('height', 50)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("<i class='fa fa-long-arrow-left'></i> time axis scale changes here <i class='fa fa-long-arrow-right'></i>");



//mouse over dots
svg.append('foreignObject')
    .attr('x', 203)
    .attr('y', 575)
    .attr('width', 170)
    .attr('height', 50)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("mouse over the dots to show additional information<br><i class='fa fa-long-arrow-down'></i> &nbsp;&nbsp; <i class='fa fa-long-arrow-down'></i>");

//keep scrolling
svg.append('foreignObject')
    .attr('x', 900)
    .attr('y', 300)
    .attr('width', 170)
    .attr('height', 50)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info bigger')
    .html("Keep scrolling <i class='fa fa-long-arrow-right'></i>");

//key
svg.append("circle")
    .attr("cx", margin + 30)
    .attr("cy", 180)
    .attr("r", 6)
    .attr("fill", colors[0])
    .attr("class", "key_circle");

svg.append('foreignObject')
    .attr('x', margin + 46)
    .attr('y', 172)
    .attr('width', 300)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Christian");

add_icon(svg.append("g").append("g"), "C").attr("transform", "translate(" + (margin + 100) + ",172.5) scale(0.15)");

svg.append("circle")
    .attr("cx", margin + 30)
    .attr("cy", 200)
    .attr("r", 6)
    .attr("fill", colors[1])
    .attr("class", "key_circle");

svg.append('foreignObject')
    .attr('x', margin + 46)
    .attr('y', 192)
    .attr('width', 300)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Islamic");

add_icon(svg.append("g").append("g"), "I").attr("transform", "translate(" + (margin + 100) + ",192.5) scale(0.15)");

svg.append("circle")
    .attr("cx", margin + 30)
    .attr("cy", 220)
    .attr("r", 6)
    .attr("fill", colors[2])
    .attr("class", "key_circle");

svg.append('foreignObject')
    .attr('x', margin + 46)
    .attr('y', 212)
    .attr('width', 300)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Jewish");

add_icon(svg.append("g").append("g"), "J").attr("transform", "translate(" + (margin + 100) + ",212.5) scale(0.15)");

svg.append("circle")
    .attr("cx", margin + 30)
    .attr("cy", 240)
    .attr("r", 6)
    .attr("fill", colors[3])
    .attr("class", "key_circle");

svg.append('foreignObject')
    .attr('x', margin + 46)
    .attr('y', 232)
    .attr('width', 300)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Other");

add_icon(svg.append("g").append("g"), "A").attr("transform", "translate(" + (margin + 100) + ",232.5) scale(0.15)");

svg.append('foreignObject')
    .attr('x', margin + 120)
    .attr('y', 232)
    .attr('width', 300)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Astrology");

add_icon(svg.append("g").append("g"), "B").attr("transform", "translate(" + (margin + 100) + ",252.5) scale(0.15)");

svg.append('foreignObject')
    .attr('x', margin + 120)
    .attr('y', 252)
    .attr('width', 300)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Bahai");

add_icon(svg.append("g").append("g"), "M").attr("transform", "translate(" + (margin + 100) + ",273.5) scale(0.15)");

svg.append('foreignObject')
    .attr('x', margin + 120)
    .attr('y', 272)
    .attr('width', 300)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Mayan");

add_icon(svg.append("g").append("g"), "O").attr("transform", "translate(" + (margin + 101) + ",294.5) scale(0.2)");

svg.append('foreignObject')
    .attr('x', margin + 120)
    .attr('y', 292)
    .attr('width', 300)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Messiah Foundation International");

add_icon(svg.append("g").append("g"), "S").attr("transform", "translate(" + (margin + 100) + ",312.5) scale(0.15)");

svg.append('foreignObject')
    .attr('x', margin + 120)
    .attr('y', 312)
    .attr('width', 300)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Scientists");

add_icon(svg.append("g").append("g"), "X").attr("transform", "translate(" + (margin + 100) + ",332.5) scale(0.15)");

svg.append('foreignObject')
    .attr('x', margin + 120)
    .attr('y', 332)
    .attr('width', 300)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Crazy People");

add_icon(svg.append("g").append("g"), "Y").attr("transform", "translate(" + (margin + 100) + ",352.5) scale(0.15)");

svg.append('foreignObject')
    .attr('x', margin + 120)
    .attr('y', 352)
    .attr('width', 300)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Yoruba");


//y2k
svg.append("line")
    .attr("x1", 1775.5)
    .attr("x2", 1785.5)
    .attr("y1", 176.5)
    .attr("y2", 176.5)
    .attr("class", "visual_line");

svg.append("line")
    .attr("x1", 1757.5)
    .attr("x2", 1775.5)
    .attr("y1", 227.5)
    .attr("y2", 227.5)
    .attr("class", "visual_line");

svg.append("line")
    .attr("x1", 1775.5)
    .attr("x2", 1785.5)
    .attr("y1", 280.5)
    .attr("y2", 280.5)
    .attr("class", "visual_line");

svg.append("line")
    .attr("x1", 1775.5)
    .attr("x2", 1775.5)
    .attr("y1", 176.5)
    .attr("y2", 280.5)
    .attr("class", "visual_line");


svg.append('foreignObject')
    .attr('x', 1735)
    .attr('y', 219)
    .attr('width', 50)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Y2K");


//add the mayans
d3.text("icons/mayan.svg", function(error, externalSVGText) {
    if (error) {
        console.log(error);
        return;
    }

    svg.append("g").attr("transform", "translate(1620,36) scale(0.7)").html(externalSVGText);

});

svg.append("line")
    .attr("x1", 1675.5)
    .attr("x2", 1817.5)
    .attr("y1", 64.5)
    .attr("y2", 64.5)
    .attr("class", "visual_line");

svg.append('foreignObject')
    .attr('x', 1685)
    .attr('y', 45)
    .attr('width', 100)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("Mayan calendar");

// harold camping
svg.append("line")
    .attr("x1", 1690.5)
    .attr("x2", 1782.5)
    .attr("y1", 408.5)
    .attr("y2", 408.5)
    .attr("class", "visual_line");

svg.append("line")
    .attr("x1", 1690.5)
    .attr("x2", 1782.5)
    .attr("y1", 400.5)
    .attr("y2", 400.5)
    .attr("class", "visual_line");

svg.append("line")
    .attr("x1", 1690.5)
    .attr("x2", 1782.5)
    .attr("y1", 392.5)
    .attr("y2", 392.5)
    .attr("class", "visual_line");

svg.append("line")
    .attr("x1", 1690.5)
    .attr("x2", 1784.5)
    .attr("y1", 384.5)
    .attr("y2", 384.5)
    .attr("class", "visual_line");

svg.append("line")
    .attr("x1", 1690.5)
    .attr("x2", 1815.5)
    .attr("y1", 96.5)
    .attr("y2", 96.5)
    .attr("class", "visual_line");

svg.append("line")
    .attr("x1", 1690.5)
    .attr("x2", 1815.5)
    .attr("y1", 112.5)
    .attr("y2", 112.5)
    .attr("class", "visual_line");

svg.append("line")
    .attr("x1", 1690.5)
    .attr("x2", 1690.5)
    .attr("y1", 96.5)
    .attr("y2", 408.5)
    .attr("class", "visual_line");

svg.append("line")
    .attr("x1", 1640.5)
    .attr("x2", 1690.5)
    .attr("y1", 256.5)
    .attr("y2", 256.5)
    .attr("class", "visual_line");

svg.append('foreignObject')
    .attr('x', 1535)
    .attr('y', 246)
    .attr('width', 100)
    .attr('height', 60)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info right')
    .html("Harold Camping (Got it wrong 6 times)");

//cricket

svg.append("line")
    .attr("x1", 2191.5)
    .attr("x2", 2191.5)
    .attr("y1", 593.5)
    .attr("y2", height - margin + 5)
    .attr("class", "visual_line");

svg.append('foreignObject')
    .attr('x', 2190)
    .attr('y', 577)
    .attr('width', 170)
    .attr('height', 20)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info')
    .html("death by cricket analogy");

//heat death

svg.append("line")
    .attr("x1", 2350.5)
    .attr("x2", 3000.5)
    .attr("y1", height - margin - 2.5)
    .attr("y2", height - margin - 2.5)
    .attr("class", "visual_line");

svg.append('foreignObject')
    .attr('x', 2830)
    .attr('y', 565)
    .attr('width', 170)
    .attr('height', 100)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info right')
    .html("in 10<sup>100</sup> years, after the earth has been destroyed by the sun, we get to the heat death of the universe");

svg.append("circle")
    .attr("cx", 3000.5)
    .attr("cy", height - margin - 2.5)
    .attr("r", 3)
    .attr("class", "visual_circle");

//heading
svg.append('foreignObject')
    .attr('x', 15)
    .attr('y', 10)
    .attr('width', 140)
    .attr('height', 120)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info big_title')
    .html("A Timeline of When the World Ended");

//link to info and Limn
svg.append("rect")
    .attr("x", 133)
    .attr("y", 437)
    .attr("height", 50)
    .attr("width", 300)
    .attr("class", "other_block");

svg.append('foreignObject')
    .attr('x', 150)
    .attr('y', 450)
    .attr('width', 400)
    .attr('height', 50)
    .append('xhtml:div')
    .attr('class', 'tooltip')
    .append('p')
    .attr('class', 'row_info bit_bigger')
    .html("You can read more about about this <a target='_blank' href='http://www.limn.co.za/2015/10/a-timeline-of-when-the-world-ended/'>here</a>.");

//this is start of the data read and processing
d3.tsv("data.tsv", function(error, data) {


    var type_list = _.uniq(_.map(data, function(d) {
        return d.Type;
    })).sort();

    temp = data;
    var last_year_line = 0;
    var current_year_line = 0;
    var push_counter_line = 0;

    var last_year_icon = 0;
    var current_year_icon = 0;
    var push_counter_icon = 0;

    var last_year = 0;
    var current_year = 0;
    var push_counter = 0;

    var x_scale_1 = d3.scale
        .linear()
        .range([margin, mid_point])
        .domain([70, 1500]);

    var x_scale_2 = d3.scale
        .linear()
        .range([mid_point, width - margin])
        .domain([1500, 2280]);

    var x_axis_1 = d3.svg.axis()
        .scale(x_scale_1)
        .tickFormat(d3.format("d"))
        .ticks(20);

    var x_axis_2 = d3.svg.axis()
        .scale(x_scale_2)
        .tickFormat(d3.format("d"))
        .ticks(40);




    svg.selectAll(".line")
        .data(data)
        .enter().append("line")
        .attr("x1", function(d) {
            if (+d.Year < 1500) {
                return Math.round(x_scale_1(+d.Year)) + 0.5;
            } else {
                return Math.round(x_scale_2(+d.Year)) + 0.5;
            }
        })
        .attr("x2", function(d) {
            if (+d.Year < 1500) {
                return Math.round(x_scale_1(+d.Year)) + 0.5;
            } else {
                return Math.round(x_scale_2(+d.Year)) + 0.5;
            }
        })
        .attr("y1", function(d) {
            current_year_line = +d.Year;
            var year_diff = current_year_line - last_year_line;
            if (year_diff < 5) {
                push_counter_line += 8;
            } else {
                push_counter_line = 0;
            }
            last_year_line = current_year_line;
            return height - margin - (5 + push_counter_line);
        })
        .attr("y2", height - margin - 3)
        .attr("class", function(d) {
            if (+d.Year % 1 === 0) {
                return "line";
            } else {
                return "no_line";
            }
        });
    circles = svg.selectAll(".g")
        .data(data)
        .enter().append("g");



    circles.append("circle")
        .attr("class", "point")
        .attr("r", 4)
        .attr("cx", function(d) {
            if (+d.Year < 1500) {
                return Math.round(x_scale_1(+d.Year)) + 0.5;
            } else {
                return Math.round(x_scale_2(+d.Year)) + 0.5;
            }
        })
        .attr("cy", function(d) {
            current_year = +d.Year;
            var year_diff = current_year - last_year;
            if (+d.Year < 1500) {
                if (year_diff < 10) {
                    push_counter += 8;
                } else {
                    push_counter = 0;
                }
            } else {
                if (year_diff < 5) {
                    push_counter += 8;
                } else {
                    push_counter = 0;
                }
            }
            last_year = current_year;
            return height - margin - (10 + push_counter);
        })
        .attr("style", function(d) {
            if (d.Type == "C") {
                return "fill:" + colors[0];
            } else if (d.Type == "I") {
                return "fill:" + colors[1];
            } else if (d.Type == "J") {
                return "fill:" + colors[2];
            } else {
                return "fill:" + colors[3];
            }
        })
        .on("mouseover", function(d) {
            selected_circle.attr("style", function(f) {
                if (f.Type == "C") {
                    return "fill:" + colors[0];
                } else if (f.Type == "I") {
                    return "fill:" + colors[1];
                } else if (f.Type == "J") {
                    return "fill:" + colors[2];
                } else {
                    return "fill:" + colors[3];
                }
            });


            d3.select(this).attr("style", "fill:#000");
            selected_circle = d3.select(this);
            var new_x = Math.round(+d3.select(this).attr("cx")) + 0.5 + box_padding;
            indicator_line.attr("x1", +new_x - box_padding - 1);
            indicator_line.attr("x2", +new_x - box_padding - 1);
            indicator_line.attr("y2", Math.round(+d3.select(this).attr("cy")) - 3.5);
            indicator_line_turn.attr("x1", +new_x - box_padding);
            indicator_line_turn.attr("x2", +new_x - 10);
            indicator_circle.attr("cx", +new_x - 10);
            date_info.text(d.Date);
            date_label.attr("x", +new_x);
            date_info.attr("x", +new_x + info_padding);
            claimant_info.text(d.Claimant);
            claimant_label.attr("x", +new_x);
            claimant_info.attr("x", +new_x + info_padding);
            description_info_fo.attr("x", +new_x + info_padding);
            description_info.html(d.Description);
            description_label.attr("x", +new_x);
            info_icon.select("g").remove();
            add_icon(info_icon.append("g"), d.Type);
            info_icon.select("g").attr("transform", "translate(" + (+new_x + 20) + ",100) scale(0.4)");
            info_background_block.attr("x", +new_x - 10);
        });

    d3.select("svg").append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0.5," + (height - margin - 2.5) + ")").call(x_axis_1);
    d3.select("svg").append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0.5," + (height - margin - 2.5) + ")").call(x_axis_2);
    d3.selectAll('.tick')[0][15].remove();

    var info_background_block = svg.append("rect")
        .attr("x", margin + box_padding - 10)
        .attr("y", margin - 20)
        .attr("height", 190)
        .attr("width", 410)
        .attr("class", "info_block");

    var date_label = svg.append("text")
        .attr("x", margin + box_padding)
        .attr("y", margin)
        .attr("class", "row_label")
        .text("Date:");

    var date_info = svg.append("text")
        .attr("x", margin + info_padding + box_padding)
        .attr("y", margin)
        .attr("class", "row_info")
        .text("");

    var claimant_label = svg.append("text")
        .attr("x", margin + box_padding)
        .attr("y", margin + 20)
        .attr("class", "row_label")
        .text("Claimant:");

    var claimant_info = svg.append("text")
        .attr("x", margin + info_padding + box_padding)
        .attr("y", margin + 20)
        .attr("class", "row_info")
        .text("");

    var description_label = svg.append("text")
        .attr("x", margin + box_padding)
        .attr("y", margin + 40)
        .attr("class", "row_label")
        .text("Description:");


    var description_info_fo = svg.append('foreignObject')
        .attr('x', margin + info_padding + box_padding)
        .attr('y', margin + 28)
        .attr('width', 300)
        .attr('height', 300);

    var description_info = description_info_fo.append('xhtml:div').append('p')
        .attr('class', 'row_info')
        .html("");

    var indicator_line = svg.append("line")
        .attr("x1", margin + 0.5)
        .attr("x2", margin + 0.5)
        .attr("y1", 150 + 0.5)
        .attr("y2", height - margin)
        .attr("stroke-dasharray", "2,3")
        .attr("class", "indicator_line");

    var indicator_line_turn = svg.append("line")
        .attr("x1", margin + 0.5)
        .attr("x2", margin + 0.5 + box_padding - 11)
        .attr("y1", 150 + 0.5)
        .attr("y2", 150 + 0.5)
        .attr("stroke-dasharray", "2,3")
        .attr("class", "indicator_line");

    var indicator_circle = svg.append("circle")
        .attr("cx", margin + 0.5 + box_padding - 11)
        .attr("cy", 150 + 0.5)
        .attr("r", 3)
        .attr("class", "visual_circle");

    var info_icon = svg.append("g");
    add_icon(info_icon.append("g"), "J");
    info_icon.select("g").attr("transform", "translate(" + (margin + 20 + box_padding) + ",100) scale(0.4)");

    date_info.text(data[0].Date);
    claimant_info.text(data[0].Claimant);
    description_info.html(data[0].Description);
    var selected_circle = d3.select(".point").attr("style", "fill:#000");
});



var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-39951846-1']);
_gaq.push(['_setDomainName', 'limn.co.za']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
